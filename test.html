<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>L2场景词汇听写-Day12</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      margin: 20px;
      font-size: 16px; /* 基础字号 */
    }
    audio {
      margin-bottom: 20px;
    }
    /* 计时显示区域 */
    #timer {
      font-size: 1.5em;
      font-weight: bold;
      margin-bottom: 20px;
    }
    .text-container {
      border: 1px solid #ccc;
      padding: 10px;
      min-height: 200px;
      /* 使用 CSS Grid 布局实现三栏排列 */
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      column-gap: 20px;
      row-gap: 10px;
    }
    .dictation-item {
      /* 保证每个听写项整体显示 */
      break-inside: avoid;
      padding: 5px;
    }
    .correct-answer {
      color: green;
      display: inline-block;
      padding: 2px 5px;
      margin-left: 5px;
    }
    input.correct {
      border-color: green;
      border-style: solid;
      border-width: 2px;
    }
    input.incorrect {
      border-color: red;
      border-style: solid;
      border-width: 2px;
    }
    button {
      margin-top: 20px;
      margin-bottom: 20px;
      font-size: 1em;
      padding: 10px 20px;
    }
    footer {
      background-color: #333;
      color: #fff;
      text-align: center;
      padding: 10px 0;
    }
    /* 响应式设计：屏幕宽度小于768px时，改为两栏布局 */
    @media (max-width: 768px) {
      .text-container {
        grid-template-columns: repeat(2, 1fr);
      }
    }
    /* 屏幕宽度小于480px时，改为单栏布局，并调整边距和字体大小 */
    @media (max-width: 480px) {
      .text-container {
        grid-template-columns: 1fr;
      }
      body {
        margin: 10px;
        font-size: 14px;
      }
      button {
        width: 100%;
      }
    }
  </style>
</head>
<body>
  <h1>L2场景词汇-Day12听写练习</h1>
  <audio controls>
    <source src="l2day12.mp3" type="audio/mpeg">
    您的浏览器不支持 audio 元素。
  </audio>
  
  <!-- 计时模块显示区域 -->
  <div id="timer">00:00:00</div>

  <!-- 动态生成听写项的容器 -->
  <div class="text-container" id="text-container"></div>

  <button onclick="handleSubmit()">提交</button>

  <script>
    // 听写单词数组：调整单词数量时，只需更新此数组即可
    const correctAnswers = [
      "points", "placement test", "cooperation", "rewrite", "encyclopedia",
      "grades", "score", "card index", "log on", "analytical",
      "drop out", "final assessment", "circulation desk", "credit", "attendance",
      "graduation appraisal", "textbook", "marks", "outline", "participation",
      "exemption", "student support", "revise", "auditor", "cut class",
      "technical vocabulary", "absence", "key terms and concepts", "mechanical", "fixed answers"
      // 如需增加到50个单词，只需在此数组中添加相应项即可
    ];

    // 动态生成听写项的代码
    const textContainer = document.getElementById('text-container');
    let htmlContent = '';
    correctAnswers.forEach((word, index) => {
      htmlContent += `<div class="dictation-item">
                        ${index + 1}. <input type="text" size="15">
                        <span class="correct-answer" style="display:none;"></span>
                      </div>`;
    });
    textContainer.innerHTML = htmlContent;

    // 获取所有输入框和正确答案提示元素
    const answerElements = document.querySelectorAll('.dictation-item input');
    const answerSpans = document.querySelectorAll('.dictation-item .correct-answer');

    /* 计时模块相关变量与函数 */
    const timerDisplay = document.getElementById('timer');
    let timerInterval;
    let elapsedTime = 0;

    // 启动计时器，每秒更新一次显示
    function startTimer() {
      timerInterval = setInterval(function() {
        elapsedTime++;
        const hours = Math.floor(elapsedTime / 3600);
        const minutes = Math.floor((elapsedTime % 3600) / 60);
        const seconds = elapsedTime % 60;
        timerDisplay.textContent = 
          (hours < 10 ? "0" + hours : hours) + ":" +
          (minutes < 10 ? "0" + minutes : minutes) + ":" +
          (seconds < 10 ? "0" + seconds : seconds);
      }, 1000);
    }

    // 重置计时器：清除当前计时并重新启动
    function resetTimer() {
      clearInterval(timerInterval);
      elapsedTime = 0;
      timerDisplay.textContent = "00:00:00";
      startTimer();
    }

    // 页面加载时启动计时器
    startTimer();

    // 检查答案函数
    function checkAnswers() {
      answerElements.forEach((input, i) => {
        const userAnswer = input.value.toLowerCase().trim();
        if (userAnswer === correctAnswers[i]) {
          input.classList.add("correct");
          input.classList.remove("incorrect");
        } else {
          input.classList.add("incorrect");
          input.classList.remove("correct");
        }
        answerSpans[i].textContent = "(" + correctAnswers[i] + ")";
        answerSpans[i].style.display = "inline";
      });
    }

    // 提交按钮的处理函数：检查答案并重置计时器
    function handleSubmit() {
      checkAnswers();
      resetTimer();
    }
  </script>

  <footer>
    <p>All Rights Reserved by John WM Qiu © 2025</p>
  </footer>
</body>
</html>
